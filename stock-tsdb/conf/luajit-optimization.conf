# LuaJIT 性能优化配置
# 专门针对LuaJIT FFI和JIT编译器的优化设置

[luajit]
# JIT编译器配置
# 启用JIT编译器
jit.enabled = true
# JIT编译模式: "-O3" 最高优化级别
jit.opt = "-O3"
# JIT编译缓存大小(MB)
jit.cache_size = 256
# 最大跟踪大小(KB)
jit.max_trace_size = 1024
# 最大记录大小(KB)
jit.max_record_size = 512

[ffi]
# FFI优化配置
# FFI缓存大小
ffi.cache_size = 10000
# 启用FFI预编译
ffi.precompile = true
# FFI内存池大小(MB)
ffi.memory_pool = 128
# FFI调用优化级别
ffi.optimization_level = 3

[performance]
# 性能优化参数
# 批量FFI调用大小
batch_ffi_size = 1000
# 预分配缓冲区大小(KB)
prealloc_buffer_size = 1024
# 对象池大小
object_pool_size = 10000
# 启用内存重用
memory_reuse = true

[cache]
# 缓存配置
# LRU缓存大小
lru_cache_size = 100000
# 查询缓存大小
query_cache_size = 50000
# 元数据缓存大小
metadata_cache_size = 10000
# 缓存过期时间(秒)
cache_ttl = 3600

[memory]
# 内存管理配置
# 最大内存使用(MB)
max_memory = 4096
# 垃圾回收阈值(MB)
gc_threshold = 512
# 启用增量GC
gc.incremental = true
# GC暂停时间(ms)
gc.pause = 100

[compiler]
# 编译器优化
# 启用内联优化
inline = true
# 启用常量折叠
constant_folding = true
# 启用死代码消除
dead_code_elimination = true
# 启用循环优化
loop_optimization = true

[debug]
# 调试和监控配置
# 启用JIT调试信息
jit.debug = false
# 启用FFI调用统计
ffi.stats = true
# 性能监控间隔(秒)
monitor.interval = 60
# 启用内存使用监控
memory.monitor = true